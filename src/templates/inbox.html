{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Inbox</h2>

<!-- Desktop view -->
<div class="table-responsive d-none d-md-block">
  <table class="table table-hover align-middle">
      <thead class="table-dark">
          <tr>
              <th>From</th>
              <th>Subject</th>
              <th>Date</th>
          </tr>
      </thead>
        <tbody id="inbox-table-body">
        {% for msg in messages %}
            <tr>
                <td class="text-truncate" style="max-width: 150px;">{{ msg.from }}</td>
                <td><a href="{{ url_for('view_email', email_id=msg.id) }}" class="text-decoration-none">{{ msg.subject }}</a></td>
                <td>{{ msg.date }}</td>
            </tr>
        {% endfor %}
        </tbody>
  </table>
</div>

<!-- Mobile view -->
<div id="inbox-mobile-list" class="d-block d-md-none">
    {% for msg in messages %}
    <a href="{{ url_for('view_email', email_id=msg.id) }}" class="text-decoration-none text-dark">
      <div class="card mb-2 shadow-sm">
        <div class="card-body">
          <div class="fw-bold text-truncate">{{ msg.subject }}</div>
          <div class="small text-muted">{{ msg.from }}</div>
          <div class="small">{{ msg.date }}</div>
        </div>
      </div>
    </a>
    {% endfor %}
</div>

<div class="text-center mt-3">
    <button id="load-more" class="btn btn-primary">load more</button>
</div>

<script>
window.INBOX_DATA = {
    loadedCount: {{ messages|length }},
    limit: 15
};
</script>
{% endblock %}
